\chapter{Themes}\label{cha:polishing}

\section{Introduction}

In this chapter you will learn how to use the ggplot2 theme system,
which allows you to exercise fine control over the non-data elements of
your plot. The theme system does not affect how the data is rendered by
geoms, or how it is transformed by scales. Themes don't change the
perceptual properties of the plot, but they do help you make the plot
aesthetically pleasing or match an existing style guide. Themes give you
control over things like fonts, ticks, panel strips, and backgrounds.
\index{Themes}

This separation of control into data and non-data parts is quite
different from base and lattice graphics. In base and lattice graphics,
most functions take a large number of arguments that specify both data
and non-data appearance, which makes the functions complicated and
harder to learn. ggplot2 takes a different approach: when creating the
plot you determine how the data is displayed, then \emph{after} it has
been created you can edit every detail of the rendering, using the
theming system.

The theming system is composed of four main components:

\begin{itemize}
\item
  Theme \textbf{elements} specify the non-data elements that you can
  control. For example, the \texttt{plot.title} element controls the
  appearance of the plot title; \texttt{axis.ticks.x}, the ticks on the
  x axis; \texttt{legend.key.height}, the height of the keys in the
  legend.
\item
  Each element is associated with an \textbf{element function}, which
  describes the visual properties of the element. For example,
  \texttt{element\_text()} sets the font size, colour and face of text
  elements like \texttt{plot.title}.
\item
  The \texttt{theme()} function which allows you to override the default
  theme elements by calling element functions, like
  \texttt{theme(plot.title\ =\ element\_text(colour\ =\ "red"))}.
\item
  Complete \textbf{themes}, like \texttt{theme\_grey()} set all of the
  theme elements to values designed to work together harmoniously.
\end{itemize}

For example, imagine you've made the following plot of your data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(mpg, }\KeywordTok{aes}\NormalTok{(cty, hwy, }\DataTypeTok{color =} \KeywordTok{factor}\NormalTok{(cyl))) +}
\StringTok{  }\KeywordTok{geom_jitter}\NormalTok{() +}\StringTok{ }
\StringTok{  }\KeywordTok{geom_abline}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey50"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{2}\NormalTok{)}
\NormalTok{base}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \centering
  \includegraphics[width=0.75\linewidth]{_figures/themes/motivation-1-1}
\end{figure}

It's served its purpose for you: you've learned that \texttt{cty} and
\texttt{hwy} are highly correlated, both are tightly coupled with
\texttt{cyl}, and that \texttt{hwy} is always greater than \texttt{cty}
(and the difference increases as \texttt{cty} increases). Now you want
to share the plot with others, perhaps by publishing it in a paper. That
requires some changes. First, you need to make sure the plot can stand
alone by:

\begin{itemize}
\tightlist
\item
  Improving the axes and legend labels.
\item
  Adding a title for the plot.
\item
  Tweaking the colour scale.
\end{itemize}

Fortunately you know how to do that already because you've read
\hyperref[cha:scales]{the scales chapter}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{labelled <-}\StringTok{ }\NormalTok{base +}
\StringTok{  }\KeywordTok{labs}\NormalTok{(}
    \DataTypeTok{x =} \StringTok{"City mileage/gallon"}\NormalTok{,}
    \DataTypeTok{y =} \StringTok{"Highway mileage/gallon"}\NormalTok{,}
    \DataTypeTok{colour =} \StringTok{"Cylinders"}\NormalTok{,}
    \DataTypeTok{title =} \StringTok{"Highway and city mileage are highly correlated"}
  \NormalTok{) +}
\StringTok{  }\KeywordTok{scale_colour_brewer}\NormalTok{(}\DataTypeTok{type =} \StringTok{"seq"}\NormalTok{, }\DataTypeTok{palette =} \StringTok{"Spectral"}\NormalTok{)}
\NormalTok{labelled}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \centering
  \includegraphics[width=0.75\linewidth]{_figures/themes/motivation-2-1}
\end{figure}

Next, you need to make sure the plot matches the style guidelines of
your journal:

\begin{itemize}
\tightlist
\item
  The background should be white, not pale grey.
\item
  The legend should be placed inside the plot if there's room.
\item
  Major gridlines should be a pale grey and minor gridlines should be
  removed.
\item
  The plot title should be 12pt bold text.
\end{itemize}

In this chapter, you'll learn how to use the theming system to make
those changes, as shown below:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{styled <-}\StringTok{ }\NormalTok{labelled +}
\StringTok{  }\KeywordTok{theme_bw}\NormalTok{() +}\StringTok{ }
\StringTok{  }\KeywordTok{theme}\NormalTok{(}
    \DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{face =} \StringTok{"bold"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{12}\NormalTok{),}
    \DataTypeTok{legend.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"white"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{4}\NormalTok{, }\DataTypeTok{colour =} \StringTok{"white"}\NormalTok{),}
    \DataTypeTok{legend.justification =} \KeywordTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{),}
    \DataTypeTok{legend.position =} \KeywordTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{),}
    \DataTypeTok{axis.ticks =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey70"}\NormalTok{, }\DataTypeTok{size =} \FloatTok{0.2}\NormalTok{),}
    \DataTypeTok{panel.grid.major =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey70"}\NormalTok{, }\DataTypeTok{size =} \FloatTok{0.2}\NormalTok{),}
    \DataTypeTok{panel.grid.minor =} \KeywordTok{element_blank}\NormalTok{()}
  \NormalTok{)}
\NormalTok{styled}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \centering
  \includegraphics[width=0.75\linewidth]{_figures/themes/motivation-3-1}
\end{figure}

Finally, the journal wants the figure as a 600 dpi TIFF file. You'll
learn the fine details of \texttt{ggsave()} in
\hyperref[sec:saving]{saving your output}.

\section{Complete themes}\label{sec:themes}

ggplot2 comes with a number of built in themes. The most important is
\texttt{theme\_grey()}, the signature ggplot2 theme with a light grey
background and white gridlines. The theme is designed to put the data
forward while supporting comparisons, following the advice of (Tufte
2006; Brewer 1994; Carr 2002; Carr 1994; Carr and Sun 1999). We can
still see the gridlines to aid in the judgement of position (Cleveland
1993), but they have little visual impact and we can easily `tune' them
out. The grey background gives the plot a similar typographic colour to
the text, ensuring that the graphics fit in with the flow of a document
without jumping out with a bright white background. Finally, the grey
background creates a continuous field of colour which ensures that the
plot is perceived as a single visual entity. \index{Themes!built-in}
\indexf{theme\_grey}

There are seven other themes built in to ggplot2 1.1.0:

\begin{itemize}
\item
  \texttt{theme\_bw()}: a variation on \texttt{theme\_grey()} that uses
  a white background and thin grey grid lines. \indexf{theme\_bw}
\item
  \texttt{theme\_linedraw()}: A theme with only black lines of various
  widths on white backgrounds, reminiscent of a line drawing.
  \indexf{theme\_linedraw}
\item
  \texttt{theme\_light()}: similar to \texttt{theme\_linedraw()} but
  with light grey lines and axes, to direct more attention towards the
  data. \indexf{theme\_light}
\item
  \texttt{theme\_dark()}: the dark cousin of \texttt{theme\_light()},
  with similar line sizes but a dark background. Useful to make thin
  coloured lines pop out. \indexf{theme\_dark}
\item
  \texttt{theme\_minimal()}: A minimalistic theme with no background
  annotations. \indexf{theme\_minimal}
\item
  \texttt{theme\_classic()}: A classic-looking theme, with x and y axis
  lines and no gridlines. \indexf{theme\_classic}
\item
  \texttt{theme\_void()}: A completely empty theme. \indexf{theme\_void}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{x =} \DecValTok{1}\NormalTok{:}\DecValTok{3}\NormalTok{, }\DataTypeTok{y =} \DecValTok{1}\NormalTok{:}\DecValTok{3}\NormalTok{)}
\NormalTok{base <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(df, }\KeywordTok{aes}\NormalTok{(x, y)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{()}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_grey}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_grey()"}\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_bw}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_bw()"}\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_linedraw}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_linedraw()"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/built-in-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/built-in-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/built-in-3}
\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_light}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_light()"}\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_dark}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_dark()"}\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_minimal}\NormalTok{()  +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_minimal()"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/unnamed-chunk-1-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/unnamed-chunk-1-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/unnamed-chunk-1-3}
\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_classic}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_classic()"}\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_void}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_void()"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/unnamed-chunk-2-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/unnamed-chunk-2-2}
\end{figure}

All themes have a \texttt{base\_size} parameter which controls the base
font size. The base font size is the size that the axis titles use: the
plot title is usually bigger (1.2x), and the tick and strip labels are
smaller (0.8x). If you want to control these sizes separately, you'll
need to modify the individual elements as described below.

As well as applying themes a plot at a time, you can change the default
theme with \texttt{theme\_set()}. For example, if you really hate the
default grey background, run \texttt{theme\_set(theme\_bw())} to use a
white background for all plots. \indexf{theme\_set}

You're not limited to the themes built-in to ggplot2. Other packages,
like ggthemes by Jeffrey Arnold, add even more. Here's a few of my
favourites from ggthemes: \index{ggtheme}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(ggthemes)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_tufte}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_tufte()"}\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_solarized}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_solarized()"}\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme_excel}\NormalTok{() +}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"theme_excel()"}\NormalTok{) }\CommentTok{# ;)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/ggtheme-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/ggtheme-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/ggtheme-3}
\end{figure}

The complete themes are a great place to start but don't give you a lot
of control. To modify individual elements, you need to use
\texttt{theme()} to override the default setting for an element with an
element function.

\subsection{Exercises}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Try out all the themes in ggthemes. Which do you like the best?
\item
  What aspects of the default theme do you like? What don't you like?\\
  What would you change?
\item
  Look at the plots in your favourite scientific journal. What theme do
  they most resemble? What are the main differences?
\end{enumerate}

\section{Modifying theme components}

To modify an individual theme component you use code like
\texttt{plot\ +\ theme(element.name\ =\ element\_function())}. In this
section you'll learn about the basic element functions, and then in the
next section, you'll see all the elements that you can modify.
\indexf{theme}

There are four basic types of built-in element functions: text, lines,
rectangles, and blank. Each element function has a set of parameters
that control the appearance:

\begin{itemize}
\item
  \texttt{element\_text()} draws labels and headings. You can control
  the font \texttt{family}, \texttt{face}, \texttt{colour},
  \texttt{size} (in points), \texttt{hjust}, \texttt{vjust},
  \texttt{angle} (in degrees) and \texttt{lineheight} (as ratio of
  \texttt{fontcase}). More details on the parameters can be found in
  \texttt{vignette("ggplot2-specs")}. Setting the font face is
  particularly challenging. \index{Themes!labels} \indexf{element\_text}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base_t <-}\StringTok{ }\NormalTok{base +}\StringTok{ }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{title =} \StringTok{"This is a ggplot"}\NormalTok{) +}\StringTok{ }\KeywordTok{xlab}\NormalTok{(}\OtherTok{NULL}\NormalTok{) +}\StringTok{ }\KeywordTok{ylab}\NormalTok{(}\OtherTok{NULL}\NormalTok{)}
\NormalTok{base_t +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{16}\NormalTok{))}
\NormalTok{base_t +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{face =} \StringTok{"bold"}\NormalTok{, }\DataTypeTok{colour =} \StringTok{"red"}\NormalTok{))}
\NormalTok{base_t +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

  \begin{figure}[H]
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_text-1}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_text-2}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_text-3}
  \end{figure}

  You can control the margins around the text with the \texttt{margin}
  argument and \texttt{margin()} function. \texttt{margin()} has four
  arguments: the amount of space (in points) to add to the top, right,
  bottom and left sides of the text. Any elements not specified default
  to 0.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# The margins here look asymmetric because there are also plot margins}
\NormalTok{base_t +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{margin =} \KeywordTok{margin}\NormalTok{()))}
\NormalTok{base_t +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{margin =} \KeywordTok{margin}\NormalTok{(}\DataTypeTok{t =} \DecValTok{10}\NormalTok{, }\DataTypeTok{b =} \DecValTok{10}\NormalTok{)))}
\NormalTok{base_t +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.title.y =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{margin =} \KeywordTok{margin}\NormalTok{(}\DataTypeTok{r =} \DecValTok{10}\NormalTok{)))}
\end{Highlighting}
\end{Shaded}

  \begin{figure}[H]
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_text-margin-1}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_text-margin-2}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_text-margin-3}
  \end{figure}
\item
  \texttt{element\_line()} draws lines parameterised by \texttt{colour},
  \texttt{size} and \texttt{linetype}: \indexf{element\_line}
  \index{Themes!lines}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.grid.major =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{))}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.grid.major =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{size =} \DecValTok{2}\NormalTok{))}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.grid.major =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{linetype =} \StringTok{"dotted"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

  \begin{figure}[H]
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_line-1}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_line-2}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_line-3}
  \end{figure}
\item
  \texttt{element\_rect()} draws rectangles, mostly used for
  backgrounds, parameterised by \texttt{fill} colour and border
  \texttt{colour}, \texttt{size} and \texttt{linetype}.\\
   \index{Background} \index{Themes!background} \indexf{theme\_rect}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"grey80"}\NormalTok{, }\DataTypeTok{colour =} \OtherTok{NA}\NormalTok{))}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"red"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{2}\NormalTok{))}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"linen"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

  \begin{figure}[H]
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_rect-1}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_rect-2}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_rect-3}
  \end{figure}
\item
  \texttt{element\_blank()} draws nothing. Use this if you don't want
  anything drawn, and no space allocated for that element. The following
  example uses \texttt{element\_blank()} to progressively suppress the
  appearance of elements we're not interested in. Notice how the plot
  automatically reclaims the space previously used by these elements: if
  you don't want this to happen (perhaps because they need to line up
  with other plots on the page), use
  \texttt{colour\ =\ NA,\ fill\ =\ NA} to create invisible elements that
  still take up space. \indexf{element\_blank}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base}
\KeywordTok{last_plot}\NormalTok{() +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.grid.minor =} \KeywordTok{element_blank}\NormalTok{())}
\KeywordTok{last_plot}\NormalTok{() +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.grid.major =} \KeywordTok{element_blank}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

  \begin{figure}[H]
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_blank-1}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_blank-2}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_blank-3}
  \end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{last_plot}\NormalTok{() +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.background =} \KeywordTok{element_blank}\NormalTok{())}
\KeywordTok{last_plot}\NormalTok{() +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{axis.title.x =} \KeywordTok{element_blank}\NormalTok{(), }
  \DataTypeTok{axis.title.y =} \KeywordTok{element_blank}\NormalTok{()}
\NormalTok{)}
\KeywordTok{last_plot}\NormalTok{() +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.line =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey50"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

  \begin{figure}[H]
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_blank-2-1}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_blank-2-2}%
    \includegraphics[width=0.333\linewidth]{_figures/themes/element_blank-2-3}
  \end{figure}
\item
  A few other settings take grid units. Create them with
  \texttt{unit(1,\ "cm")} or \texttt{unit(0.25,\ "in")}.
\end{itemize}

To modify theme elements for all future plots, use
\texttt{theme\_update()}. It returns the previous theme settings, so you
can easily restore the original parameters once you're done.
\index{Themes!updating} \indexf{theme\_set}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{old_theme <-}\StringTok{ }\KeywordTok{theme_update}\NormalTok{(}
  \DataTypeTok{plot.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"lightblue3"}\NormalTok{, }\DataTypeTok{colour =} \OtherTok{NA}\NormalTok{),}
  \DataTypeTok{panel.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"lightblue"}\NormalTok{, }\DataTypeTok{colour =} \OtherTok{NA}\NormalTok{),}
  \DataTypeTok{axis.text =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"linen"}\NormalTok{),}
  \DataTypeTok{axis.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"linen"}\NormalTok{)}
\NormalTok{)}
\NormalTok{base}
\KeywordTok{theme_set}\NormalTok{(old_theme)}
\NormalTok{base}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \centering
  \includegraphics[width=0.333\linewidth]{_figures/themes/theme-update-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/theme-update-2}
\end{figure}

\section{Theme elements}\label{sec:theme-elements}

There are around 40 unique elements that control the appearance of the
plot. They can be roughly grouped into five categories: plot, axis,
legend, panel and facet. The following sections describe each in turn.
\index{Themes!elements}

\subsection{Plot elements}

\index{Themes!plot}

Some elements affect the plot as a whole:

\begin{longtable}[c]{@{}lll@{}}
\toprule
Element & Setter & Description\tabularnewline
\midrule
\endhead
plot.background & \texttt{element\_rect()} & plot
background\tabularnewline
plot.title & \texttt{element\_text()} & plot title\tabularnewline
plot.margin & \texttt{margin()} & margins around plot\tabularnewline
\bottomrule
\end{longtable}

\texttt{plot.background} draws a rectangle that underlies everything
else on the plot. By default, ggplot2 uses a white background which
ensures that the plot is usable wherever it might end up (e.g.~even if
you save as a png and put on a slide with a black background). When
exporting plots to use in other systems, you might want to make the
background transparent with \texttt{fill\ =\ NA}. Similarly, if you're
embedding a plot in a system that already has margins you might want to
eliminate the built-in margins. Note that a small margin is still
necessary if you want to draw a border around the plot.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey50"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{2}\NormalTok{))}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{plot.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey50"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{2}\NormalTok{),}
  \DataTypeTok{plot.margin =} \KeywordTok{margin}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{)}
\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"lightblue"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/plot-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/plot-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/plot-3}
\end{figure}

\subsection{Axis elements}\label{sub:theme-axis}

\index{Themes!axis} \index{Axis!styling}

The axis elements control the apperance of the axes:

\begin{longtable}[c]{@{}lll@{}}
\toprule
Element & Setter & Description\tabularnewline
\midrule
\endhead
axis.line & \texttt{element\_line()} & line parallel to axis (hidden in
default themes)\tabularnewline
axis.text & \texttt{element\_text()} & tick labels\tabularnewline
axis.text.x & \texttt{element\_text()} & x-axis tick
labels\tabularnewline
axis.text.y & \texttt{element\_text()} & y-axis tick
labels\tabularnewline
axis.title & \texttt{element\_text()} & axis titles\tabularnewline
axis.title.x & \texttt{element\_text()} & x-axis title\tabularnewline
axis.title.y & \texttt{element\_text()} & y-axis title\tabularnewline
axis.ticks & \texttt{element\_line()} & axis tick marks\tabularnewline
axis.ticks.length & \texttt{unit()} & length of tick
marks\tabularnewline
\bottomrule
\end{longtable}

Note that \texttt{axis.text} (and \texttt{axis.title}) comes in three
forms: \texttt{axis.text}, \texttt{axis.text.x}, and
\texttt{axis.text.y}. Use the first form if you want to modify the
properties of both axes at once: any properties that you don't
explicitly set in \texttt{axis.text.x} and \texttt{axis.text.y} will be
inherited from \texttt{axis.text}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{x =} \DecValTok{1}\NormalTok{:}\DecValTok{3}\NormalTok{, }\DataTypeTok{y =} \DecValTok{1}\NormalTok{:}\DecValTok{3}\NormalTok{)}
\NormalTok{base <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(df, }\KeywordTok{aes}\NormalTok{(x, y)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{()}

\CommentTok{# Accentuate the axes}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.line =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey50"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{1}\NormalTok{))}
\CommentTok{# Style both x and y axis labels}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.text =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{color =} \StringTok{"blue"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{12}\NormalTok{))}
\CommentTok{# Useful for long labels}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.text.x =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{angle =} \NormalTok{-}\DecValTok{90}\NormalTok{, }\DataTypeTok{vjust =} \FloatTok{0.5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/axis-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/axis-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/axis-3}
\end{figure}

The most common adjustment is to rotate the x-axis labels to avoid long
overlapping labels. If you do this, note negative angles tend to look
best and you should set \texttt{hjust\ =\ 0} and \texttt{vjust\ =\ 1}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}
  \DataTypeTok{x =} \KeywordTok{c}\NormalTok{(}\StringTok{"label"}\NormalTok{, }\StringTok{"a long label"}\NormalTok{, }\StringTok{"an even longer label"}\NormalTok{), }
  \DataTypeTok{y =} \DecValTok{1}\NormalTok{:}\DecValTok{3}
\NormalTok{)}
\NormalTok{base <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(df, }\KeywordTok{aes}\NormalTok{(x, y)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{()}
\NormalTok{base}
\NormalTok{base +}\StringTok{ }
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.text.x =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{angle =} \NormalTok{-}\DecValTok{30}\NormalTok{, }\DataTypeTok{vjust =} \DecValTok{1}\NormalTok{, }\DataTypeTok{hjust =} \DecValTok{0}\NormalTok{)) +}\StringTok{ }
\StringTok{  }\KeywordTok{xlab}\NormalTok{(}\OtherTok{NULL}\NormalTok{) +}\StringTok{ }
\StringTok{  }\KeywordTok{ylab}\NormalTok{(}\OtherTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.5\linewidth]{_figures/themes/axis-labels-1}%
  \includegraphics[width=0.5\linewidth]{_figures/themes/axis-labels-2}
\end{figure}

\subsection{Legend elements}

\index{Themes!legend} \index{Legend!styling}

The legend elements control the apperance of all legends. You can also
modify the appearance of individual legends by modifying the same
elements in \texttt{guide\_legend()} or \texttt{guide\_colourbar()}.

\begin{longtable}[c]{@{}lll@{}}
\toprule
Element & Setter & Description\tabularnewline
\midrule
\endhead
legend.background & \texttt{element\_rect()} & legend
background\tabularnewline
legend.key & \texttt{element\_rect()} & background of legend
keys\tabularnewline
legend.key.size & \texttt{unit()} & legend key size\tabularnewline
legend.key.height & \texttt{unit()} & legend key height\tabularnewline
legend.key.width & \texttt{unit()} & legend key width\tabularnewline
legend.margin & \texttt{unit()} & legend margin\tabularnewline
legend.text & \texttt{element\_text()} & legend labels\tabularnewline
legend.text.align & 0--1 & legend label alignment (0 = right, 1 =
left)\tabularnewline
legend.title & \texttt{element\_text()} & legend name\tabularnewline
legend.title.align & 0--1 & legend name alignment (0 = right, 1 =
left)\tabularnewline
\bottomrule
\end{longtable}

These options are illustrated below:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{x =} \DecValTok{1}\NormalTok{:}\DecValTok{4}\NormalTok{, }\DataTypeTok{y =} \DecValTok{1}\NormalTok{:}\DecValTok{4}\NormalTok{, }\DataTypeTok{z =} \KeywordTok{rep}\NormalTok{(}\KeywordTok{c}\NormalTok{(}\StringTok{"a"}\NormalTok{, }\StringTok{"b"}\NormalTok{), }\DataTypeTok{each =} \DecValTok{2}\NormalTok{))}
\NormalTok{base <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(df, }\KeywordTok{aes}\NormalTok{(x, y, }\DataTypeTok{colour =} \NormalTok{z)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{()}

\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{legend.background =} \KeywordTok{element_rect}\NormalTok{(}
    \DataTypeTok{fill =} \StringTok{"lemonchiffon"}\NormalTok{, }
    \DataTypeTok{colour =} \StringTok{"grey50"}\NormalTok{, }
    \DataTypeTok{size =} \DecValTok{1}
  \NormalTok{)}
\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{legend.key =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{color =} \StringTok{"grey50"}\NormalTok{),}
  \DataTypeTok{legend.key.width =} \KeywordTok{unit}\NormalTok{(}\FloatTok{0.9}\NormalTok{, }\StringTok{"cm"}\NormalTok{),}
  \DataTypeTok{legend.key.height =} \KeywordTok{unit}\NormalTok{(}\FloatTok{0.75}\NormalTok{, }\StringTok{"cm"}\NormalTok{)}
\NormalTok{)}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{legend.text =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{15}\NormalTok{),}
  \DataTypeTok{legend.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{15}\NormalTok{, }\DataTypeTok{face =} \StringTok{"bold"}\NormalTok{)}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/legend-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/legend-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/legend-3}
\end{figure}

There are four other properties that control how legends are laid out in
the context of the plot (\texttt{legend.position},
\texttt{legend.direction}, \texttt{legend.justification},
\texttt{legend.box}). They are described in
\hyperref[sub:legend-layout]{legend layout}.

\subsection{Panel elements}

\index{Themes!panel} \index{Aspect ratio}

Panel elements control the appearance of the plotting panels:

\begin{longtable}[c]{@{}lll@{}}
\toprule
Element & Setter & Description\tabularnewline
\midrule
\endhead
panel.background & \texttt{element\_rect()} & panel background (under
data)\tabularnewline
panel.border & \texttt{element\_rect()} & panel border (over
data)\tabularnewline
panel.grid.major & \texttt{element\_line()} & major grid
lines\tabularnewline
panel.grid.major.x & \texttt{element\_line()} & vertical major grid
lines\tabularnewline
panel.grid.major.y & \texttt{element\_line()} & horizontal major grid
lines\tabularnewline
panel.grid.minor & \texttt{element\_line()} & minor grid
lines\tabularnewline
panel.grid.minor.x & \texttt{element\_line()} & vertical minor grid
lines\tabularnewline
panel.grid.minor.y & \texttt{element\_line()} & horizontal minor grid
lines\tabularnewline
aspect.ratio & numeric & plot aspect ratio\tabularnewline
\bottomrule
\end{longtable}

The main difference between \texttt{panel.background} and
\texttt{panel.border} is that the background is drawn underneath the
data, and the border is drawn on top of it. For that reason, you'll
always need to assign \texttt{fill\ =\ NA} when overriding
\texttt{panel.border}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(df, }\KeywordTok{aes}\NormalTok{(x, y)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{()}
\CommentTok{# Modify background}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"lightblue"}\NormalTok{))}

\CommentTok{# Tweak major grid lines}
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{panel.grid.major =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{color =} \StringTok{"gray60"}\NormalTok{, }\DataTypeTok{size =} \FloatTok{0.8}\NormalTok{)}
\NormalTok{)}
\CommentTok{# Just in one direction  }
\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{panel.grid.major.x =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{color =} \StringTok{"gray60"}\NormalTok{, }\DataTypeTok{size =} \FloatTok{0.8}\NormalTok{)}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/panel-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/panel-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/panel-3}
\end{figure}

Note that aspect ratio controls the aspect ratio of the \emph{panel},
not the overall plot:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{base2 <-}\StringTok{ }\NormalTok{base +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"grey50"}\NormalTok{))}
\CommentTok{# Wide screen}
\NormalTok{base2 +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{aspect.ratio =} \DecValTok{9} \NormalTok{/}\StringTok{ }\DecValTok{16}\NormalTok{)}
\CommentTok{# Long and skiny}
\NormalTok{base2 +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{aspect.ratio =} \DecValTok{2} \NormalTok{/}\StringTok{ }\DecValTok{1}\NormalTok{)}
\CommentTok{# Square}
\NormalTok{base2 +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{aspect.ratio =} \DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/aspect-ratio-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/aspect-ratio-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/aspect-ratio-3}
\end{figure}

\subsection{Facetting elements}

\index{Themes!facets} \index{Facetting!styling}

The following theme elements are associated with faceted ggplots:

\begin{longtable}[c]{@{}lll@{}}
\toprule
Element & Setter & Description\tabularnewline
\midrule
\endhead
strip.background & \texttt{element\_rect()} & background of panel
strips\tabularnewline
strip.text & \texttt{element\_text()} & strip text\tabularnewline
strip.text.x & \texttt{element\_text()} & horizontal strip
text\tabularnewline
strip.text.y & \texttt{element\_text()} & vertical strip
text\tabularnewline
panel.margin & \texttt{unit()} & margin between facets\tabularnewline
panel.margin.x & \texttt{unit()} & margin between facets
(vertical)\tabularnewline
panel.margin.y & \texttt{unit()} & margin between facets
(horizontal)\tabularnewline
\bottomrule
\end{longtable}

Element \texttt{strip.text.x} affects both \texttt{facet\_wrap()} or
\texttt{facet\_grid()}; \texttt{strip.text.y} only affects
\texttt{facet\_grid()}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{x =} \DecValTok{1}\NormalTok{:}\DecValTok{4}\NormalTok{, }\DataTypeTok{y =} \DecValTok{1}\NormalTok{:}\DecValTok{4}\NormalTok{, }\DataTypeTok{z =} \KeywordTok{c}\NormalTok{(}\StringTok{"a"}\NormalTok{, }\StringTok{"a"}\NormalTok{, }\StringTok{"b"}\NormalTok{, }\StringTok{"b"}\NormalTok{))}
\NormalTok{base_f <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(df, }\KeywordTok{aes}\NormalTok{(x, y)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{() +}\StringTok{ }\KeywordTok{facet_wrap}\NormalTok{(~z)}

\NormalTok{base_f}
\NormalTok{base_f +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{panel.margin =} \KeywordTok{unit}\NormalTok{(}\FloatTok{0.5}\NormalTok{, }\StringTok{"in"}\NormalTok{))}
\NormalTok{base_f +}\StringTok{ }\KeywordTok{theme}\NormalTok{(}
  \DataTypeTok{strip.background =} \KeywordTok{element_rect}\NormalTok{(}\DataTypeTok{fill =} \StringTok{"grey20"}\NormalTok{, }\DataTypeTok{color =} \StringTok{"grey80"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{1}\NormalTok{),}
  \DataTypeTok{strip.text =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"white"}\NormalTok{)}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
  \includegraphics[width=0.333\linewidth]{_figures/themes/facetting-1}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/facetting-2}%
  \includegraphics[width=0.333\linewidth]{_figures/themes/facetting-3}
\end{figure}

\subsection{Exercises}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Create the ugliest plot possible! (Contributed by Andrew D. Steen,
  University of Tennessee - Knoxville)
\item
  \texttt{theme\_dark()} makes the inside of the plot dark, but not the
  outside. Change the plot background to black, and then update the text
  settings so you can still read the labels.
\item
  Make an elegant theme that uses ``linen'' as the background colour and
  a serif font for the text.
\item
  Systematically explore the effects of \texttt{hjust} when you have a
  multiline title. Why doesn't \texttt{vjust} do anything?
\end{enumerate}

\hyperdef{}{sec:saving}{\section{Saving your output}\label{sec:saving}}

When saving a plot to use in another program, you have two basic choices
of output: raster or vector: \index{Exporting} \index{Saving output}

\begin{itemize}
\item
  Vector graphics describe a plot as sequence of operations: draw a line
  from \((x_1, y_1)\) to \((x_2, y_2)\), draw a circle at \((x_3, x_4)\)
  with radius \(r\). This means that they are effectively `infinitely'
  zoomable; there is no loss of detail. The most useful vector graphic
  formats are pdf and svg.
\item
  Raster graphics are stored as an array of pixel colours and have a
  fixed optimal viewing size. The most useful raster graphic format is
  png.
\end{itemize}

Figure \ref{fig:vector-raster} illustrates the basic differences in
these formats for a circle. A good description is available at
\url{http://tinyurl.com/rstrvctr}.

\begin{figure}[htbp]
  \centering
    \includegraphics[width= 0.5\linewidth]{diagrams/vector-raster}
  \caption{The schematic difference between raster (left) and vector (right) graphics. }
  \label{fig:vector-raster}
\end{figure}

Unless there is a compelling reason not to, use vector graphics: they
look better in more places. There are two main reasons to use raster
graphics:

\begin{itemize}
\item
  You have a plot (e.g.~a scatterplot) with thousands of graphical
  objects (i.e.~points). A vector version will be large and slow to
  render.
\item
  You want to embed the graphic in MS Office. MS has poor support for
  vector graphics (except for their own DrawingXML format which is not
  currently easy to make from R), so raster graphics are easier.
\end{itemize}

There are two ways to save output from ggplot2. You can use the standard
R approach where you open a graphics device, generate the plot, then
close the device: \indexf{pdf}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{pdf}\NormalTok{(}\StringTok{"output.pdf"}\NormalTok{, }\DataTypeTok{width =} \DecValTok{6}\NormalTok{, }\DataTypeTok{height =} \DecValTok{6}\NormalTok{)}
\KeywordTok{ggplot}\NormalTok{(mpg, }\KeywordTok{aes}\NormalTok{(displ, cty)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{()}
\KeywordTok{dev.off}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

This works for all packages, but is verbose. ggplot2 provides a
convenient shorthand with \texttt{ggsave()}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ggplot}\NormalTok{(mpg, }\KeywordTok{aes}\NormalTok{(displ, cty)) +}\StringTok{ }\KeywordTok{geom_point}\NormalTok{()}
\KeywordTok{ggsave}\NormalTok{(}\StringTok{"output.pdf"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\texttt{ggsave()} is optimised for interactive use: you can use it after
you've drawn a plot. It has the following important arguments:
\indexf{ggsave}

\begin{itemize}
\item
  The first argument, \texttt{path}, specifies the path where the image
  should be saved. The file extension will be used to automatically
  select the correct graphics device. \texttt{ggsave()} can produce
  \texttt{.eps}, \texttt{.pdf}, \texttt{.svg}, \texttt{.wmf},
  \texttt{.png}, \texttt{.jpg}, \texttt{.bmp}, and \texttt{.tiff}.
\item
  \texttt{width} and \texttt{height} control the output size, specified
  in inches. If left blank, they'll use the size of the on-screen
  graphics device.
\item
  For raster graphics (i.e. \texttt{.png}, \texttt{.jpg}), the
  \texttt{dpi} argument controls the resolution of the plot. It defaults
  to 300, which is appropriate for most printers, but you may want to
  use 600 for particularly high-resolution output, or 96 for on-screen
  (e.g., web) display.
\end{itemize}

See \texttt{?ggsave} for more details.

\section*{References}
\addcontentsline{toc}{section}{References}

\hyperdef{}{ref-brewer:1994}{\label{ref-brewer:1994}}
Brewer, Cynthia A. 1994. ``Color Use Guidelines for Mapping and
Visualization.'' In \emph{Visualization in Modern Cartography}, edited
by A.M. MacEachren and D.R.F. Taylor, 123--47. Elsevier Science.

\hyperdef{}{ref-carr:1994}{\label{ref-carr:1994}}
Carr, Dan. 1994. ``Using Gray in Plots.'' \emph{ASA Statistical
Computing and Graphics Newsletter} 2 (5): 11--14.
\url{http://www.galaxy.gmu.edu/~dcarr/lib/v5n2.pdf}.

\hyperdef{}{ref-carr:2002}{\label{ref-carr:2002}}
---------. 2002. ``Graphical Displays.'' In \emph{Encyclopedia of
Environmetrics}, edited by Abdel H. El-Shaarawi and Walter W. Piegorsch,
2:933--60. John Wiley \& Sons.
\url{http://www.galaxy.gmu.edu/~dcarr/lib/EnvironmentalGraphics.pdf}.

\hyperdef{}{ref-carr:1999}{\label{ref-carr:1999}}
Carr, Dan, and Ru Sun. 1999. ``Using Layering and Perceptual Grouping in
Statistical Graphics.'' \emph{ASA Statistical Computing and Graphics
Newsletter} 10 (1): 25--31.

\hyperdef{}{ref-cleveland:1993a}{\label{ref-cleveland:1993a}}
Cleveland, William. 1993. ``A Model for Studying Display Methods of
Statistical Graphics.'' \emph{Journal of Computational and Graphical
Statistics} 2: 323--64. \url{http://stat.bell-labs.com/doc/93.4.ps}.

\hyperdef{}{ref-tufte:2006}{\label{ref-tufte:2006}}
Tufte, Edward R. 2006. \emph{Beautiful Evidence}. Graphics Press.
